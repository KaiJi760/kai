mhg.filterText={init:function(scope,data){const filterTextLoanAmounts=scope.querySelectorAll('[data-property-name="filter-text-loan-amount"]');function updateLoanAmountButtonsState({numericValue:numericValue}){document.querySelectorAll('[data-property-name="btn-loan-amount"]').forEach((btnLoanAmount=>{const isStickyBtn=btnLoanAmount.classList.contains("sticky-filter-btn");btnLoanAmount.getAttribute("data-property-value")==numericValue?(btnLoanAmount.classList.add("bg-blue-9"),isStickyBtn?btnLoanAmount.classList.remove("bg-white","text-gray-11"):btnLoanAmount.classList.remove("bg-blue-9/30")):(isStickyBtn?btnLoanAmount.classList.add("bg-white","text-gray-11"):btnLoanAmount.classList.add("bg-blue-9/30"),btnLoanAmount.classList.remove("bg-blue-9"))}))}function updateTenureButtonsState({numericValue:numericValue}){if("true"===document.querySelector('[data-module-id="results-page-product-list"]').getAttribute("data-property-display-as-year")){numericValue/=12}document.querySelectorAll('[data-property-name="btn-loan-tenure"]').forEach((btnTenure=>{const isStickyBtn=btnTenure.classList.contains("sticky-filter-btn");btnTenure.getAttribute("data-property-value")==numericValue?(btnTenure.classList.add("bg-blue-9"),isStickyBtn?btnTenure.classList.remove("bg-white","text-gray-11"):btnTenure.classList.remove("bg-blue-9/30")):(isStickyBtn?btnTenure.classList.add("bg-white","text-gray-11"):btnTenure.classList.add("bg-blue-9/30"),btnTenure.classList.remove("bg-blue-9"))}))}function updateLoanAndTenureFilterLabels({type:type,value:value}){const labelLoans=document.querySelectorAll('[data-property-name="filter-header-loan-label"]'),labelTenures=document.querySelectorAll('[data-property-name="filter-header-tenure-label"]');if("LOAN"==type)labelLoans.forEach((labelLoan=>{labelLoan.innerText=value}));else{if("true"===document.querySelector('[data-module-id="results-page-product-list"]').getAttribute("data-property-display-as-year")){value/=12}labelTenures.forEach((labelTenure=>{labelTenure.innerText=value}))}}updateLoanAmountButtonsState({numericValue:data.defaultLoanAmount}),updateTenureButtonsState({numericValue:data.defaultTenure});for(let i=0;i<filterTextLoanAmounts.length;i++){const filterTextLoanAmount=filterTextLoanAmounts[i];filterTextLoanAmount.addEventListener("focusin",mhg.filterText.handleInputTextFocusIn),filterTextLoanAmount.addEventListener("focusout",mhg.filterText.handleInputTextFocusOut),filterTextLoanAmount.addEventListener("keypress",(function(event){mhg.filterText.isNumber(event)||event.preventDefault()}),!1),filterTextLoanAmount.addEventListener("blur",(function(event){let numericValue=event.target.value.replace(/\D/g,"");const formattedValue=Number(numericValue).toLocaleString();event.target.value=formattedValue;const productList=document.querySelector('[data-module-id="results-page-product-list"]'),minRange=parseFloat(filterTextLoanAmount.getAttribute("data-min-range")),maxRange=parseFloat(filterTextLoanAmount.getAttribute("data-max-range")),defaultValue=filterTextLoanAmount.getAttribute("data-default-value").replace(/\D/g,"");productList.setAttribute("data-property-filter-loan-amount",numericValue),(isNaN(numericValue)||numericValue<minRange||numericValue>maxRange)&&(productList.setAttribute("data-property-filter-loan-amount",defaultValue),numericValue=defaultValue),updateLoanAmountButtonsState({numericValue:numericValue}),updateLoanAndTenureFilterLabels({type:"LOAN",value:formattedValue})}))}const filterTextLoanTenure=scope.querySelectorAll('[data-property-name="filter-text-loan-tenure"]');for(let i=0;i<filterTextLoanTenure.length;i++){const filterTextLoanTenur=filterTextLoanTenure[i];filterTextLoanTenur.addEventListener("focusin",mhg.filterText.handleInputTextFocusIn),filterTextLoanTenur.addEventListener("focusout",mhg.filterText.handleInputTextFocusOut),filterTextLoanTenur.addEventListener("keypress",(function(event){mhg.filterText.isNumber(event)||event.preventDefault()}),!1),filterTextLoanTenur.addEventListener("blur",(function(event){let numericValue=event.target.value.replace(/\D/g,"");const productList=document.querySelector('[data-module-id="results-page-product-list"]'),displayAsYear="true"===productList.getAttribute("data-property-display-as-year");displayAsYear&&(numericValue*=12);const minRange=parseFloat(filterTextLoanTenur.getAttribute("data-min-range")),maxRange=parseFloat(filterTextLoanTenur.getAttribute("data-max-range"));let defaultValue=filterTextLoanTenur.getAttribute("data-default-value").replace(/\D/g,"");productList.setAttribute("data-property-filter-tenure-months",numericValue),(isNaN(numericValue)||numericValue<minRange||numericValue>maxRange)&&(displayAsYear&&(defaultValue*=12),productList.setAttribute("data-property-filter-tenure-months",defaultValue),numericValue=defaultValue),updateTenureButtonsState({numericValue:numericValue}),updateLoanAndTenureFilterLabels({type:"TENURE",value:numericValue})}))}const filterTextContainers=scope.querySelectorAll('[data-property-name="filter-text-container"]');for(let i=0;i<filterTextContainers.length;i++){const filterTextContainer=filterTextContainers[i];filterTextContainer.addEventListener("click",(function(){const filterTextLoanTenure=filterTextContainer.querySelector('[data-property-name="filter-text-loan-tenure"]');if(filterTextLoanTenure){filterTextLoanTenure.focus();const TextLoanTenureLength=filterTextLoanTenure.value.length;filterTextLoanTenure.setSelectionRange(TextLoanTenureLength,TextLoanTenureLength)}const filterTextLoanAmount=filterTextContainer.querySelector('[data-property-name="filter-text-loan-amount"]');if(filterTextLoanAmount){filterTextLoanAmount.focus();const TextLoanAmountLength=filterTextLoanAmount.value.length;filterTextLoanAmount.setSelectionRange(TextLoanAmountLength,TextLoanAmountLength)}}))}},isNumber:function(evt){var charCode=(evt=evt||window.event).which?evt.which:evt.keyCode;return!(charCode>31&&(charCode<48||charCode>57))},handleInputTextFocusIn:function(){const filterText=this.closest('[data-property-name="filter-text"]'),filterTextContainer=filterText.querySelector('[data-property-name="filter-text-container"]'),filterTextLabel=filterText.querySelector('[data-property-name="filter-text-label"]');filterText.querySelector('[data-property-name="filter-text-icon"]').classList.add("invisible"),filterTextLabel.classList.remove("text-gray-12"),filterTextLabel.classList.add("text-blue-10"),filterTextContainer.classList.remove("border-gray-7","border"),filterTextContainer.classList.add("border-blue-7","border-2")},handleInputTextFocusOut:function(){const filterText=this.closest('[data-property-name="filter-text"]'),filterTextContainer=filterText.querySelector('[data-property-name="filter-text-container"]'),filterTextLabel=filterText.querySelector('[data-property-name="filter-text-label"]');filterText.querySelector('[data-property-name="filter-text-icon"]').classList.remove("invisible"),filterTextLabel.classList.add("text-gray-12"),filterTextLabel.classList.remove("text-blue-10"),filterTextContainer.classList.add("border-gray-7","border"),filterTextContainer.classList.remove("border-blue-7","border-2")}};
//# sourceURL=https://cdn1.hubspotusercontent-eu1.net/hub/25174313/hub_generated/template_assets/86933067489/1709874857332/global/modules/common/macros/filter-panel/filter-text.js